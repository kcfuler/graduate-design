# YOLO 格式验证测试

该目录包含对生成的 YOLO 格式数据进行验证的测试。

## 功能描述

本测试用于验证 YOLO 格式数据的正确性，主要检查以下内容：

1. 目录结构是否符合 YOLO 格式要求
2. 类别文件和配置文件是否存在
3. 图像和标签的匹配度
4. 通过可视化验证边界框的准确性

## 测试文件

- `test_yolo_data.py`: 主测试脚本，验证 YOLO 格式数据并生成可视化结果

## 使用方法

在项目根目录下运行：

```bash
python tests/yolo_validation/test_yolo_data.py --data_dir ./processed_data/yolo --samples 5 --output_dir ./tests/yolo_validation/output
```

参数说明：
- `--data_dir`: 待验证的 YOLO 格式数据目录
- `--samples`: 每个分割集中要可视化的样本数量，默认 5
- `--output_dir`: 可视化输出目录

## 输出结果

测试脚本将在 `output` 目录中生成以下内容：

1. 各分割集的可视化结果：
   - `train/`: 训练集图像可视化
   - `val/`: 验证集图像可视化
   - `test/`: 测试集图像可视化
2. `validation_results.json`: 验证结果元数据，包含类别信息、匹配统计等

### 可视化结果结构

可视化结果按照以下目录结构组织：

```
output/
  ├── train/           # 训练集样本可视化
  │   └── *.jpg        # 带边界框和标签的图像
  ├── val/             # 验证集样本可视化
  │   └── *.jpg        # 带边界框和标签的图像
  ├── test/            # 测试集样本可视化
  │   └── *.jpg        # 带边界框和标签的图像
  └── validation_results.json  # 验证结果元数据
```

## 可视化结果解释

可视化结果包含原始图像、边界框和类别标签。边界框的颜色是随机生成的，用于区分不同的对象。可视化图像可以直观地检查：

1. 边界框是否准确包围交通标志
2. 类别标签是否正确显示
3. 标注是否有明显错误（如边界框过大、过小或位置偏移）

## 成功标准

测试成功的标准为：

1. 所有必需的目录结构和文件都存在
2. 图像和标签的匹配度接近 100%
3. 可视化结果显示边界框正确包围目标对象
4. 类别标签正确显示 